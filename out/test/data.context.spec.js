(function(){var e,t,o;e=require("sublime-core"),o=require("sails-mongo"),t=require("../"),describe("DataContext test suite",function(){var e,n,r;return e={adapters:{"default":o,mongo:o},connections:{mongo:{adapter:"mongo",host:"localhost",port:27017,database:"sublime-db"}},defaults:{migrate:"drop"}},n=new t.DataContext(e),r=[],it("should create the context",function(){return expect(n).not.toBeNull()}),it("should register models",function(){var o,n;return e={identity:"user",connection:"mongo"},n={first_name:"string",last_name:"string"},o=new t.Model(e,n),expect(o).not.toBeNull(),r.push(o),expect(r.length).toBe(1)}),it("should load the models",function(e){return n.init(r).then(function(){return expect(n.models).not.toBeNull(),e()})}),it("should query models",function(e){return expect(n).not.toBeNull(),expect(n.models).not.toBeNull(),n.models.user.find().exec(function(t,o){return expect(t).toBeNull(),expect(o.length).toBe(0),e()})})})}).call(this);
